## 자가 테스트 코드의 가치
- 모든 테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자.
  - 컴파일할 때마다 테스트도 함께해 디버깅 시간을 크게 줄일 수 있다.
- 테스트 스위트는 강력한 버그 검출 도구로, 버그를 찾는 데 걸리는 시간을 대폭 줄여준다.
- 테스트를 작성하기 가장 좋은 시점은 프로그래밍을 시작하기 전이다.
  - 원하는 기능을 추가하기 위해 무엇이 필요한지 고민하게 된다.
  - 구현보다 인터페이스에 집중하게 된다.
- TDD 에서는 (통과하지 못할) 테스트를 작성하고, 이 테스트를 통과하게끔 코드를 작성하고, 결과 코드를 최대한 깔끔하게 리팩터링하는 과정을 짧은 주기로 반복한다.

## 테스트 추가하기
- 임시 값을 설정했다가 실제 값으로 대체하고, 오류를 심었다가 되돌리는 패턴은 기존 코드를 검사하는 테스트를 추가할 때 흔히 쓰인다.
- 잘못될까봐 가장 걱정되는 영역을 집중적으로 테스트해서 테스트에 쏟는 노력의 효과를 극대화해라.
- 테스트할 때 beforeEach 구문을 적극 활용해 개별 테스트를 실핼할 때마다 픽스처를 새로 만드는 것을 권장한다.

## 픽스처 수정하기
- beforeEach 블록에서 설정한 표준 픽스처를 취해서, 테스트를 수행하고, 이 픽스처가 기대한 대로 처리했는지를 검증하는 패턴도 흔히 쓰인다.

## 경계 조건 검사하기
- 문제가 생길 가능성이 있는 경계 조건을 생각해보고 그 부분을 집중적으로 테스트하자.
- 어차피 모든 버그를 잡아낼 수는 없다고 생각하여 테스트를 작성하지 않는다면 대다수의 버그를 잡을 수 있는 기회를 날리는 셈이다.
- 코드에서 처리 과정이 복잡하거나 함수에서 오류가 생길만한 부분을 집중적으로 테스트한다.

## 끝나지 않은 여정
- 버그 리포트를 받으면 가장 먼저 그 버그를 드러내는 단위 테스트부터 작성하자.

## 리팩토링
- refactoring/chapter04 브랜치
  - Producer와 Province 순환 종속성 제거
  - Producers 일급 컬렉션 생성 및 연산로직 이동

## 느낀점
4장을 읽으며 제일 와닿았던 부분은 두가지 입니다.
1. 문제가 생길 가능성이 있는 경계 조건을 생각해보고 그 부분을 집중적으로 테스트하자.
2. 버그 리포트를 받으면 가장 먼저 그 버그를 드러내는 단위 테스트부터 작성하자.
   
<br>

### 테스트 코드 작성과 수확체감 법칙 
현재 실무에서 테스트 코드를 작성하면서, 테스트의 기준이 모호하다 보니 코드 커버리지 지표를 참고했습니다. 하지만, 단순히 커버리지를 높이기 위해 간단한 로직까지 테스트하다 보니 시간이 많이 소요되었고, 비즈니스 개발과의 균형을 맞추기가 어려웠습니다.

책에서는 모든 경우를 테스트하는 것이 좋지만, 테스트 코드에도 수확체감 법칙이 적용되므로 핵심적인 부분을 우선적으로 테스트하는 것이 효율적이라고 합니다. 이 내용을 읽고 나니, 앞으로는 중요한 로직을 중심으로 테스트를 작성하는 방식으로 개선해야겠다는 생각이 들었습니다.

### 버그 리포트를 단위 테스트로 전환하는 습관

버그가 발생했다는 것은 해당 로직을 완전히 이해하지 못했거나, 비즈니스 상 구멍이 존재한다는 신호일 가능성이 큽니다. 이런 상황에서 우선적으로 테스트 코드를 작성하면, 버그가 난 부분을 명확하게 이해할 수 있고, 추후 동일한 문제가 재발하는 것을 방지할 수 있습니다.

이러한 접근 방식은 단순히 버그를 해결하는 것뿐만 아니라, 코드의 신뢰성을 높이고 장기적으로 유지보수성을 개선하는 데도 큰 도움이 될 것 같습니다.

### 마무리
앞으로는 테스트 코드 작성을 무작정 늘리는 것이 아니라, 중요한 로직을 중심으로 효율적으로 작성하는 방향으로 개선해볼 계획입니다.

또한, 버그가 발생하면 우선 단위 테스트를 작성하는 습관을 들여, 문제를 명확하게 분석하고 재발을 방지하는데 집중해야겠다는 점을 배웠습니다.